//=============================================================================
//
// model_manager.cpp
// Author : shota fukuoka
//
//=============================================================================

//*****************************************************************************
// インクルード
//*****************************************************************************
#include "model_manager.h"
#include "model.h"

///////////////////////////////////////////////////////////////////////////////
//コンストラクタ
///////////////////////////////////////////////////////////////////////////////
ModelManager::ModelManager()
{
	;
}

///////////////////////////////////////////////////////////////////////////////
//デストラクタ
///////////////////////////////////////////////////////////////////////////////
ModelManager::~ModelManager()
{
	;
}


///////////////////////////////////////////////////////////////////////////////
//追加
///////////////////////////////////////////////////////////////////////////////
void ModelManager::AddSkinMeshModel(SkinMeshModel* model)
{
	m_SkinMeshList.push_back(model);
}

///////////////////////////////////////////////////////////////////////////////
//モデルデータ探索
///////////////////////////////////////////////////////////////////////////////
SkinMeshModel *ModelManager::SeekSkinMeshModel(SkinMeshModel* model)
{
	for (auto ite = m_SkinMeshList.begin(); ite != m_SkinMeshList.end(); ++ite)
	{
		if (strcmp((*ite)->GetFileName(), model->GetFileName()) == 0)
		{
			return (*ite);
		}
	}
	model->LoadFile(model->GetFileName());
	AddSkinMeshModel(model);
	return  model;
}

///////////////////////////////////////////////////////////////////////////////
//スキンメッシュ削除
///////////////////////////////////////////////////////////////////////////////
void ModelManager::ReleasekSkinMeshModel(void)
{
	for (auto ite = m_SkinMeshList.begin(); ite != m_SkinMeshList.end(); ++ite)
	{
		if ((*ite) == NULL) { continue; }
		(*ite)->Release();
	}
}

///////////////////////////////////////////////////////////////////////////////
//全削除
///////////////////////////////////////////////////////////////////////////////
void ModelManager::ReleaseAll(void)
{
	ReleasekSkinMeshModel();
}