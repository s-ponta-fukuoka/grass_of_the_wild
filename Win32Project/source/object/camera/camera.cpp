//=============================================================================
//
// camera.cpp
// Author : shota fukuoka
//
//=============================================================================

//*****************************************************************************
// インクルード
//*****************************************************************************
#include "camera.h"
#include "../../../source/app/app.h"
#include "../../device/input.h"

///////////////////////////////////////////////////////////////////////////////
// コンストラクタ
///////////////////////////////////////////////////////////////////////////////
Camera::Camera()
	: m_positionAt(VECTOR3(0,0,0))
	, m_vectorUp(VECTOR3(0, 0, 0))
	, m_vector(XMVectorSet(0,0,0,0))
	, m_pConstant(NULL)
{
	m_pTransform = new Transform();

	m_pConstant = new AppRenderer::Constant();
}

///////////////////////////////////////////////////////////////////////////////
// デストラクタ
///////////////////////////////////////////////////////////////////////////////
Camera::~Camera()
{
	;
}

///////////////////////////////////////////////////////////////////////////////
// 初期化
///////////////////////////////////////////////////////////////////////////////
HRESULT Camera::Init(void )
{
	return S_OK;
}

///////////////////////////////////////////////////////////////////////////////
// 終了
///////////////////////////////////////////////////////////////////////////////
void Camera::Release(void)
{
	if (m_pTransform != NULL)
	{
		delete m_pTransform;
		m_pTransform = NULL;
	}

	if (m_pConstant != NULL)
	{
		delete m_pConstant;
		m_pConstant = NULL;
	}
}

///////////////////////////////////////////////////////////////////////////////
// 更新
///////////////////////////////////////////////////////////////////////////////
void Camera::Update(void)
{
	m_vector = XMVector3Normalize(XMVectorSet(m_pTransform->position.x,
		m_pTransform->position.y,
		m_pTransform->position.z, 1)
		- XMVectorSet(m_positionAt.x, m_positionAt.y, m_positionAt.z, 1));
}